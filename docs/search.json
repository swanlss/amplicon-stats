[
  {
    "objectID": "index.html#sampling-effort",
    "href": "index.html#sampling-effort",
    "title": "0. Before we begin",
    "section": "Sampling effort",
    "text": "Sampling effort\nFirst let’s plot some good old rarefaction curves. You want your sampling effort to be approaching or on the plateau. These curves will tend to the “true” sample richness value.\n\nrarecurve(t(asvtab.c), step=50, cex=0.5)\n\n\n\n\n\nAlpha diversity\nNow let’s calculate the alpha diversity of the samples using Hill’s Numbers. Because we are not yet reaching plateau for many samples, these results will be difficult to interpret.\n\nalpha_diversity &lt;- data.frame (\n  richness = hill_taxa(asvtab.c.StdByTotM2, q = 0, MARGIN = 2, base = exp(1)),\n  shannon  = hill_taxa(asvtab.c.StdByTotM2, q = 1, MARGIN = 2, base = exp(1)),\n  Simpson_inv = hill_taxa(asvtab.c.StdByTotM2, q = 2, MARGIN = 2, base = exp(1))\n  )\nalpha_diversity$Sample_ID &lt;- row.names(alpha_diversity)\n\nalpha_diversity &lt;- merge(alpha_diversity, metad.N140.c , by= \"Sample_ID\" , all=T)\n\n# We can calculate Simpson evenness by dividing the Simpson diversity by the richness\n\nalpha_diversity$eveness &lt;- alpha_diversity$Simpson_inv/alpha_diversity$richness\n\n\n# Bar plot (bp)\nggbarplot(alpha_diversity, x = \"Sample_ID\", y = \"richness\",\n                fill = \"Plastic\",               # change fill color by cyl\n                color = \"white\",            # Set bar border colors to white\n                palette = \"jco\",            # jco journal color palett. see ?ggpar\n                sort.val = \"asc\",           # Sort the value in ascending order\n                sort.by.groups = TRUE,      # Sort inside each group\n                x.text.angle = 90           # Rotate vertically x axis texts\n)\n\n\n\nggbarplot(alpha_diversity, x = \"Sample_ID\", y = \"eveness\",\n          fill = \"Plastic\",               # change fill color by cyl\n          color = \"white\",            # Set bar border colors to white\n          palette = \"jco\",            # jco journal color palett. see ?ggpar\n          sort.val = \"asc\",           # Sort the value in ascending order\n          sort.by.groups = TRUE,      # Sort inside each group\n          x.text.angle = 90           # Rotate vertically x axis texts\n)\n\n\n\nggbarplot(alpha_diversity, x = \"Sample_ID\", y = \"shannon\",\n          fill = \"Plastic\",               # change fill color by cyl\n          color = \"white\",            # Set bar border colors to white\n          palette = \"jco\",            # jco journal color palett. see ?ggpar\n          sort.val = \"asc\",           # Sort the value in ascending order\n          sort.by.groups = TRUE,      # Sort inside each group\n          x.text.angle = 90           # Rotate vertically x axis texts\n)\n\n\n\n# Compare Shannon diversity between plastic groups with a boxplot:\n\nggboxplot(alpha_diversity, x = \"Plastic\", y = \"shannon\",\n          color = \"Plastic\", palette = \"jco\",\n          add = \"jitter\")\n\n\n\n\n\n\nPhylogenetic alpha Diversity\nIf you have a tree for your OTUs/ASVs you can also calculate phylogeny diversity, i.e. if you have a community that is skewed towards a few branches of the tree or if it’s evenly distributed across the tree.\n\nlibrary(picante)\n\ndf.pd &lt;- pd(t(otu_table_ps1), treefile_p1,include.root=F) # t(ou_table) transposes the table for use in picante and the tre file comes from the first code chunck we used to read tree file (see making a phyloseq object section)."
  }
]